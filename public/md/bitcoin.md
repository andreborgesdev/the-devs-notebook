# Bitcoin

## UTXO (Unspent transaction output)

- A UTXO is the amount of digital currency remaining after a cryptocurrency transaction is executed.
- UTXOs are processed continuously and are part of the beginning and end of each transaction.
- When a transaction is completed, any unspent outputs are recorded into a database as inputs that can be used later for a new transaction.

You can think of it as the change you receive after buying an item, but it is not a lower denomination of the currency—it is a transaction output in the database generated by the network to allow for non-exact change transactions.

For example, imagine that 1 BTC is a bucket full of coins. Each coin represents a UTXO. If you purchase something from Bob for .5 BTC, the network will give Bob the entire bucket of coins and send back the .5 BTC you're owed in "change." You now have a UTXO worth .5 BTC that cannot be divided into smaller amounts.

## Imagine you have one $10, one $20, and one $50 bill.

When paying, you may find yourself in one of these situations:
Case 1 - The product costs $10.
You can pay that with one $10 bill. This transaction has only one input (the $10 bill) and one output (the $10 bill the cashier receives).
Case 2 -The product costs $30.
You still can pay, but this time you need two different bills: 10 and 20. This is the case where a transaction has multiple inputs (the $10 and $20 bills) and one output (the $30 the cashier gets).
Case 3 -The product costs $45.
You pay with a $50 bill. The cashier gives you back $5. This case is equivalent to one input (the $50 bill) and multiple outputs ($45 for the cashier and $5 back to you).
Case 4 -The product costs $55.
You pay with a $10 and a $50, which amounts to $60. The cashier gives you back $5. This case is equivalent to multiple inputs (the $10 and $50 bills) and multiple outputs ($55 for the cashier and $5 back to you).

A transaction must have *at least* one input and *at least* one output. The output(s) of a transaction become the input(s) of another transaction. This way, the history of a coin can be traced back to the block where it was mined.

If you wanted to know how much cash you own, you need to add the values of all the bills and coins you have in your wallet(s). In Bitcoin’s case, wallets keep track of the UTXOs associated with the user’s keys. This way, they know how many coins the user owns.

Pros:

- It’s easy to check if an output has already been spent, avoiding double-spending attacks.
- Transactions can easily be processed in parallel, which results in better scalability.
- It has slightly better privacy since users can use a new address for each transaction.

Cons:

- Difficult for new users to get a grasp of this system.
- Harder to implement smart contracts because UTXOs don’t keep track of any state.

## **Double-spending Attack**

A double-spending attack occurs when the same token (the same coin) is spent more than once. If you have a $10 bill, you cannot spend it twice because it won’t be under your control as soon as you pay for something and hand it to someone else. However, with digital tokens, how do you ensure that the same token is not spent in different transactions?

**How Bitcoin Solves the Double-Spending Problem**
When a coin is used in a transaction, it is removed from the UTXO set. Similarly, when new transactions are mined, their outputs are added to the UTXO set. Therefore avoiding double-spending attacks is as simple as checking if the coin you are trying to spend is part of the UTXO set. If it is, you can safely spend it. Otherwise, it has already been spent.
Each full node maintains a list of all the UTXO, which makes this verification quick.